#!/bin/bash

cd ~/dev/calcentral
rm -rf log/*

RENV="$1"
if [ -z $1 ]; then
	RENV="development"
fi

export JRUBY_OPTS="-Xcext.enabled=true -X-C -J-Xms3000m -J-Xmx3000m -J-Xmn500m -J-XX:PermSize=500m -J-XX:MaxPermSize=500m --headless -J-XX:+TieredCompilation -J-XX:TieredStopAtLevel=1 -J-Xcompile.invokedynamic=false -J-XX:+UseConcMarkSweepGC"

RAILS_ENV=$RENV bundle exec torquebox run -p=3000
